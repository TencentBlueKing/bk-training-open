(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{100:function(t,e,a){"use strict";var i=a(1);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;a(29);a(86);var r=i(a(87));var s=i(a(95));var n={components:{bkPagination:r.default},data:function t(){return{myTodayReport:true,defaultPaging:{current:1,limit:8,count:0,limitList:[8,16,32,64]},groupsData:[],curGroupId:null,curGroup:{id:"",name:"",admin:[],create_by:"",create_name:"",create_time:""},customOption:{disabledDate:function t(e){if(e>new Date){return true}}},isUser:false,curDate:(0,s.default)(new Date).format("YYYY-MM-DD"),dailysData:{count:100,dailys:[]},groupUsers:[],curUserId:null,curUserName:this.$store.state.user.username}},computed:{link:function t(){return window.PROJECT_CONFIG.SITE_URL+"/home/?date="+this.curDate}},created:function t(){var e=this.$route.query.group;if(e!==undefined){this.curGroupId=parseInt(e)}this.init()},methods:{changeLimit:function t(e){this.defaultPaging.limit=e;if(this.curUserId===""&&this.curDate===""){this.curDate=(0,s.default)(new Date).format("YYYY-MM-DD")}this.getDailys()},changePage:function t(e){this.defaultPaging.current=e;if(this.curUserId===""&&this.curDate===""){this.curDate=(0,s.default)(new Date).format("YYYY-MM-DD")}this.getDailys()},changeType:function t(){this.myTodayReport=true;this.isUser=!this.isUser;if(!this.isUser){this.changeGroup(this.curGroupId)}},getGroupUsers:function t(e){var a=this;this.$http.get("/get_group_users/"+e+"/").then(function(t){a.groupUsers=t.data})},changeDateOrUser:function t(e,a){this.curDate=a===""?"":(0,s.default)(a).format("YYYY-MM-DD");this.curUserId=e;if(this.curUserId===""&&this.curDate===""){this.curDate=(0,s.default)(new Date).format("YYYY-MM-DD")}this.getDailys()},getDailys:function t(){var e=this;this.$http.get("/report_filter/"+this.curGroupId+"/?date="+this.curDate+"&member_id="+this.curUserId+"&size="+this.defaultPaging.limit+"&page="+this.defaultPaging.current).then(function(t){if(t.result){e.defaultPaging.count=t.data.total_report_num;e.dailysData.dailys=t.data.reports;if(t.data.my_today_report!==undefined){e.myTodayReport=t.data.my_today_report}else{e.myTodayReport=true}if(e.isUser){e.myTodayReport=true}}else{var a={message:t.message,offsetY:80,theme:"error"};e.$bkMessage(a)}})},init:function t(){var e=this;this.$http.get("/get_user_groups/").then(function(t){e.groupsData=t.data;if(e.groupsData.length!==0){if(e.curGroupId!==null){var a=e;e.groupsData.forEach(function(t){if(t.id===a.curGroupId){a.curGroup=t;a.getGroupUsers(a.curGroupId);a.changeDateOrUser("",a.curDate)}})}else{e.curGroupId=e.groupsData[0].id;e.curGroup=e.groupsData[0]}}})},changeGroup:function t(e){if(e===null||e===""){this.curGroup={id:"",name:"",admin:[],create_by:"",create_name:"",create_time:""};this.groupUsers=[];this.curUserId=null;this.dailysData.dailys=[]}else{var a=this;this.groupsData.forEach(function(t){if(t.id===e){a.curGroup=t}});this.getGroupUsers(e);this.isUser=false;this.changeDateOrUser("",new Date)}}}};e.default=n},101:function(t,e,a){},241:function(t,e,a){"use strict";var i=a(101);var r=a.n(i);var s=r.a},246:function(t,e,a){"use strict";var i=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"body"},[a("bk-divider",{staticStyle:{"margin-bottom":"30px"},attrs:{align:"left"}},[a("div",{staticClass:"container_title"},[t._v("日报查看")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"left_container"},[a("bk-select",{staticStyle:{width:"190px",display:"inline-block"},attrs:{disabled:false,"ext-cls":"select-custom","ext-popover-cls":"select-popover-custom",searchable:""},on:{change:function(e){t.changeGroup(t.curGroupId)}},model:{value:t.curGroupId,callback:function(e){t.curGroupId=e},expression:"curGroupId"}},t._l(t.groupsData,function(t){return a("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})}),1),t._v(" "),a("bk-button",{staticClass:"mr10",staticStyle:{"margin-top":"-21px","margin-left":"5px"},attrs:{theme:"primary",type:"submit",title:"基础按钮"},on:{click:t.changeType}},[t._v("\n                "+t._s(t.isUser?"日期":"成员")+"\n            ")]),t._v(" "),a("div",{staticStyle:{"margin-top":"18px",height:"707px"}},[t.isUser?a("div",{staticClass:"users_list"},[a("div",t._l(t.groupUsers,function(e){return a("bk-button",{key:e.id,staticClass:"mr10",staticStyle:{width:"130px"},attrs:{theme:e.id===t.curUserId?"primary":"default"},on:{click:function(a){t.changeDateOrUser(e.id,"")}}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}),1)]):a("div",{staticClass:"date_picker",staticStyle:{"margin-left":"0px"}},[a("bk-date-picker",{staticClass:"mr15",staticStyle:{position:"relative"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",open:true,"ext-popover-cls":"custom-popover-cls",options:t.customOption},on:{change:function(e){t.changeDateOrUser("",t.changeDate)}},model:{value:t.changeDate,callback:function(e){t.changeDate=e},expression:"changeDate"}})],1)]),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("div",{staticClass:"right_container"},[!t.myTodayReport?a("div",{staticStyle:{"margin-bottom":"10px"}},[a("bk-alert",{attrs:{type:"warning",title:"警告的提示文字"}},[a("bk-link",{attrs:{slot:"title",theme:"warning",href:t.link},slot:"title"},[t._v("您当天未提交日报，可点击链接前往补签")])],1)],1):t._e(),t._v(" "),a("bk-pagination",{staticStyle:{"margin-bottom":"10px"},attrs:{current:t.defaultPaging.current,count:t.defaultPaging.count,limit:t.defaultPaging.limit,"limit-list":t.defaultPaging.limitList},on:{change:t.changePage,"limit-change":t.changeLimit,"update:current":function(e){t.$set(t.defaultPaging,"current",e)},"update:count":function(e){t.$set(t.defaultPaging,"count",e)}}}),t._v(" "),t.defaultPaging.count===0?a("div",{staticStyle:{margin:"200px auto",width:"140px"}},[t._v("\n                没有日报内容哟~\n            ")]):t._e(),t._v(" "),a("div",t._l(t.dailysData.dailys,function(e,i){return a("bk-card",{key:i,staticClass:"card",staticStyle:{float:"left","margin-bottom":"10px"},attrs:{title:e.create_by+"("+e.create_name+")"+"-"+"日报"}},[a("div",[t._v("日期："+t._s(e.date))]),t._v(" "),a("div",[t._v("日报状态："+t._s(e.send_describe))]),t._v(" "),t._l(e.content,function(i,r){return a("div",{key:r},[a("h2",[t._v(t._s(i.title))]),t._v(" "),i.type==="table"?a("div",{staticStyle:{"font-size":"18px"}},t._l(i.content,function(i,r){return a("div",{key:r},[a("pre",[t._v("("+t._s(r+1)+")"+t._s(i.text))]),t.curUserName===e.create_by||!i.isPrivate?a("span",[t._v("----("+t._s(i.cost)+")")]):t._e()])}),0):a("div",[t._v("\n                            "+t._s(i.text)+"\n                        ")])])})],2)}),1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})])],1)};var r=[];a.d(e,"a",function(){return i});a.d(e,"b",function(){return r})},85:function(t,e,a){"use strict";a.r(e);var i=a(246);var r=a(99);for(var s in r)if(s!=="default")(function(t){a.d(e,t,function(){return r[t]})})(s);var n=a(241);var u=a(4);var c=Object(u["a"])(r["default"],i["a"],i["b"],false,null,"79835f2e",null);e["default"]=c.exports},99:function(t,e,a){"use strict";a.r(e);var i=a(100);var r=a.n(i);for(var s in i)if(s!=="default")(function(t){a.d(e,t,function(){return i[t]})})(s);e["default"]=r.a}}]);