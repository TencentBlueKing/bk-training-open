(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{231:function(t,e,a){"use strict";var r=a(91);var i=a.n(r);var n=i.a},236:function(t,e,a){"use strict";var r=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"body"},[a("bk-divider",{staticStyle:{"margin-bottom":"30px"},attrs:{align:"left"}},[a("div",{staticClass:"container_title"},[t._v("日报查看")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"left_container"},[a("bk-select",{staticStyle:{width:"190px",display:"inline-block"},attrs:{disabled:false,"ext-cls":"select-custom","ext-popover-cls":"select-popover-custom",searchable:""},on:{change:function(e){t.changeGroup(t.curGroupId)}},model:{value:t.curGroupId,callback:function(e){t.curGroupId=e},expression:"curGroupId"}},t._l(t.groupsData,function(t){return a("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})}),1),t._v(" "),a("bk-button",{staticClass:"mr10",staticStyle:{"margin-top":"-21px","margin-left":"5px"},attrs:{theme:"primary",type:"submit",title:"基础按钮"},on:{click:t.changeType}},[t._v("\n                "+t._s(t.isUser?"日期":"成员")+"\n            ")]),t._v(" "),a("div",{staticStyle:{"margin-top":"18px",height:"707px"}},[t.isUser?a("div",{staticClass:"users_list"},[a("div",t._l(t.groupUsers,function(e){return a("bk-button",{key:e.id,staticClass:"mr10",staticStyle:{width:"130px"},attrs:{theme:e.id===t.curUserId?"primary":"default"},on:{click:function(a){t.changeDateOrUser(e.id,"")}}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}),1)]):a("div",{staticClass:"date_picker",staticStyle:{"margin-left":"0px"}},[a("bk-date-picker",{staticClass:"mr15",staticStyle:{position:"relative"},attrs:{format:"yyyy-MM-dd",placeholder:"选择日期",open:true,"ext-popover-cls":"custom-popover-cls",options:t.customOption},on:{change:function(e){t.changeDateOrUser("",t.changeDate)}},model:{value:t.changeDate,callback:function(e){t.changeDate=e},expression:"changeDate"}})],1)]),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("div",{staticClass:"right_container"},[!t.myTodayReport?a("div",{staticStyle:{"margin-bottom":"10px"}},[a("bk-alert",{attrs:{type:"warning",title:"警告的提示文字"}},[a("bk-link",{attrs:{slot:"title",theme:"warning",href:"/?date="+t.curDate},slot:"title"},[t._v("您当天未提交日报，可点击链接前往补签")])],1)],1):t._e(),t._v(" "),a("bk-pagination",{staticStyle:{"margin-bottom":"10px"},attrs:{current:t.defaultPaging.current,count:t.defaultPaging.count,limit:t.defaultPaging.limit,"limit-list":t.defaultPaging.limitList},on:{change:t.changePage,"limit-change":t.changeLimit,"update:current":function(e){t.$set(t.defaultPaging,"current",e)},"update:count":function(e){t.$set(t.defaultPaging,"count",e)}}}),t._v(" "),t.defaultPaging.count===0?a("div",{staticStyle:{margin:"200px auto",width:"140px"}},[t._v("\n                没有日报内容哟~\n            ")]):t._e(),t._v(" "),a("div",t._l(t.dailysData.dailys,function(e,r){return a("bk-card",{key:e.id,staticClass:"card",staticStyle:{float:"left","margin-bottom":"10px"},attrs:{title:e.create_by+"("+e.create_name+")"+"-"+"日报"}},[a("div",[t._v("日期："+t._s(e.date))]),t._v(" "),a("div",[t._v("日报状态："+t._s(e.send_describe))]),t._v(" "),t._l(t.dailysData.formatContent[r],function(e,r){return a("div",{key:r,staticStyle:{"font-size":"18px"}},[a("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(r))]),t._v(" "),a("pre",[t._v(t._s(e))])])})],2)}),1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})])],1)};var i=[];a.d(e,"a",function(){return r});a.d(e,"b",function(){return i})},75:function(t,e,a){"use strict";a.r(e);var r=a(236);var i=a(89);for(var n in i)if(n!=="default")(function(t){a.d(e,t,function(){return i[t]})})(n);var s=a(231);var o=a(2);var u=Object(o["a"])(i["default"],r["a"],r["b"],false,null,"1ec83e4b",null);e["default"]=u.exports},89:function(t,e,a){"use strict";a.r(e);var r=a(90);var i=a.n(r);for(var n in r)if(n!=="default")(function(t){a.d(e,t,function(){return r[t]})})(n);e["default"]=i.a},90:function(t,e,a){"use strict";var r=a(0);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;a(29);a(76);var i=r(a(77));var n=r(a(85));function s(t,e){var a=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=o(t))||e&&t&&typeof t.length==="number"){if(a)t=a;var r=0;var i=function t(){};return{s:i,n:function e(){if(r>=t.length)return{done:true};return{done:false,value:t[r++]}},e:function t(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,s=false,u;return{s:function e(){a=a.call(t)},n:function t(){var e=a.next();n=e.done;return e},e:function t(e){s=true;u=e},f:function t(){try{if(!n&&a.return!=null)a.return()}finally{if(s)throw u}}}}function o(t,e){if(!t)return;if(typeof t==="string")return u(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor)a=t.constructor.name;if(a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(t,e)}function u(t,e){if(e==null||e>t.length)e=t.length;for(var a=0,r=new Array(e);a<e;a++){r[a]=t[a]}return r}var c={components:{bkPagination:i.default},data:function t(){return{myTodayReport:true,defaultPaging:{current:1,limit:8,count:0,limitList:[8,16,32,64]},groupsData:[],curGroupId:null,curGroup:{id:"",name:"",admin:[],create_by:"",create_name:"",create_time:""},customOption:{disabledDate:function t(e){if(e>new Date){return true}}},isUser:false,curDate:(0,n.default)(new Date).format("YYYY-MM-DD"),dailysData:{count:100,dailys:[],formatTitle:[],formatContent:[]},groupUsers:[],curUserId:null}},created:function t(){var e=this.$route.query.group;if(e!==undefined){this.curGroupId=parseInt(e)}this.init()},methods:{changeLimit:function t(e){this.defaultPaging.limit=e;this.getDailys()},changePage:function t(e){this.defaultPaging.current=e;this.getDailys()},changeType:function t(){this.isUser=!this.isUser;if(!this.isUser){this.changeGroup(this.curGroupId)}},getGroupUsers:function t(e){var a=this;this.$http.get("/get_group_users/"+e+"/").then(function(t){a.groupUsers=t.data})},classifyContent:function t(){for(var e in this.dailysData.dailys){var a=this.dailysData.dailys[e];this.dailysData.formatContent[e]={};for(var r in a.content){if(a.content[r]instanceof Array){var i="";if(a.content.isPrivate){var n=s(a.content[r]),o;try{for(n.s();!(o=n.n()).done;){var u=o.value;i=i+u.content+";\n"}}catch(t){n.e(t)}finally{n.f()}}else{var c=s(a.content[r]),l;try{for(c.s();!(l=c.n()).done;){var d=l.value;i=i+d.content+";-----("+d.cost+")\n"}}catch(t){c.e(t)}finally{c.f()}}this.dailysData.formatTitle[e]=r;this.dailysData.formatContent[e][r]=i}else if(r!=="isPrivate"){this.dailysData.formatContent[e][r]=a.content[r]}}}},changeDateOrUser:function t(e,a){this.curDate=a===""?"":(0,n.default)(a).format("YYYY-MM-DD");this.curUserId=e;this.getDailys()},getDailys:function t(){var e=this;this.$http.get("/report_filter/"+this.curGroupId+"/?date="+this.curDate+"&member_id="+this.curUserId+"&size="+this.defaultPaging.limit+"&page="+this.defaultPaging.current).then(function(t){if(t.result){e.defaultPaging.count=t.data.total_report_num;e.dailysData.dailys=t.data.reports;if(t.data.my_today_report!==undefined){e.myTodayReport=t.data.my_today_report}else{e.myTodayReport=true}e.classifyContent()}else{var a={message:t.message,offsetY:80,theme:"error"};e.$bkMessage(a)}})},init:function t(){var e=this;this.$http.get("/get_user_groups/").then(function(t){e.groupsData=t.data;if(e.groupsData.length!==0){if(e.curGroupId!==null){var a=e;e.groupsData.forEach(function(t){if(t.id===a.curGroupId){a.curGroup=t;a.getGroupUsers(a.curGroupId);a.changeDateOrUser("",a.curDate)}})}else{e.curGroupId=e.groupsData[0].id;e.curGroup=e.groupsData[0]}}})},changeGroup:function t(e){if(e===null||e===""){this.curGroup={id:"",name:"",admin:[],create_by:"",create_name:"",create_time:""};this.groupUsers=[];this.curUserId=null;this.dailysData.dailys=[]}else{var a=this;this.groupsData.forEach(function(t){if(t.id===e){a.curGroup=t}});this.getGroupUsers(e);this.isUser=false;this.changeDateOrUser("",this.curDate)}}}};e.default=c},91:function(t,e,a){}}]);